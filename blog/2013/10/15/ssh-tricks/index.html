<!DOCTYPE html>
<html lang="en">
<head>

        <title>SSH login without password</title>
        <meta charset="utf-8" />
        <link href="http://chengyanlai.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Little Things about Everything Full Atom Feed" />
        <link href="http://chengyanlai.github.io/feeds/osx.atom.xml" type="application/atom+xml" rel="alternate" title="Little Things about Everything Categories Atom Feed" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="http://chengyanlai.github.io/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="http://chengyanlai.github.io/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="http://chengyanlai.github.io/theme/pygment.css" />
        <link rel="stylesheet" type="text/css" href="http://chengyanlai.github.io/theme/custom.css" />

        <script src="http://chengyanlai.github.io/theme/js/libs/modernizr-2.6.2.min.js"></script>






</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="http://chengyanlai.github.io">Little Things about Everything <strong>Never Stop Learning</strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="pretty navbar">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>

              <ul class="columns">
                <li><a href="http://chengyanlai.github.io">Home</a></li>
                <li><a href="#">About</a>
                    <div class="dropdown">
                        <ul>
                          <li><a href="http://chengyanlai.github.io/pages/chenyen.html">Chen-Yen Lai</a></li>
                          <li><a href="http://chengyanlai.github.io/pages/yaoan.html">Yao-An Chan</a></li>
                          <li><a href="http://chengyanlai.github.io/pages/kessler.html">Kessler Lai</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="http://chengyanlai.github.io/pages/7-termianl.html">Terminal</a></li>
                <li><a href="http://chengyanlai.github.io/pages/8-git.html">Git</a></li>
                <li><a href="http://chengyanlai.github.io/pages/9-links.html">Links</a></li>
                <li><a href="http://chengyanlai.github.io/archives.html">Archives</a>
                    <div class="dropdown">
                        <ul>
                          <li><a href="http://chengyanlai.github.io/author/chen-yen-lai.html">Chen-Yen's Archives</a></li>
                          <li><a href="http://chengyanlai.github.io/author/yao-an-chan.html">Yao-An's Archives</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="http://chengyanlai.github.io/tags.html">Tag Cloud</a>
              </ul>
            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="http://chengyanlai.github.io/blog/2013/10/15/ssh-tricks/" rel="bookmark"
                   title="Permalink to SSH login without password">SSH login without password</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="2013-10-15T16:05:00-07:00">
                <i class="icon-clock icon-medium"></i> Tue 15 October 2013
              </abbr>
              <address class="vcard author">
                <i class="icon-feather icon-medium"></i> <a class="url fn" href="http://chengyanlai.github.io/author/chen-yen-lai.html">Chen-Yen Lai</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              <h2>Create SSH key</h2>
<p>Beforehand - You need to know where is the server (It's not helping!), and you need to create a new ssh-key like the following command at your home directory</p>
<div class="highlight"><pre><span></span>$ ssh-keygen -t rsa -C <span class="s2">&quot;{Your email}&quot;</span>
</pre></div>


<p>During the process, you will see</p>
<div class="highlight"><pre><span></span> Generating public/private rsa key pair.  
 Enter file in which to save the key <span class="o">(</span>/home/a/.ssh/id_rsa<span class="o">)</span>: **<span class="o">{</span>Name of the key<span class="o">}</span>**  
 Created directory <span class="s1">&#39;${HOME}/.ssh&#39;</span>.  
 Enter passphrase <span class="o">(</span>empty <span class="k">for</span> no passphrase<span class="o">)</span>: **<span class="o">{</span>You can choose to create or leave empty.<span class="o">}</span>**  
 Enter same passphrase again: **<span class="o">{</span>Do the same as above<span class="o">}</span>**  
 Your identification has been saved in <span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/.ssh/<span class="o">{</span>Name of the key<span class="o">}</span>.  
 Your public key has been saved in <span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/.ssh/<span class="o">{</span>Name of the key<span class="o">}</span>.pub.  
 The key fingerprint is: 3e:4f:05:79:3a:9f:96:7c:3b:ad:e9:58:37:bc:37:e4 a@A
</pre></div>


<p>After that you can see two files in the directory <code>${HOME}/.ssh/</code>, they are</p>
<div class="highlight"><pre><span></span><span class="o">{</span>Name of the key<span class="o">}</span>
<span class="o">{</span>Name of the key<span class="o">}</span>.pub
</pre></div>


<p>The first is your <code>Private Key</code>, and second is the <code>Public Key</code>. Remember <strong><em>NOT</em></strong> to share your <code>Private Key</code> to anyone.</p>
<h2 id="prot">Protected Private Key</h2>
<p>If you chose to add the password during the key generation above, you need to do this to prevent the typing during every time you login (That's our goal!). Do the following command after the key is generated</p>
<div class="highlight"><pre><span></span>$ ssh-add -K ~/.ssh/<span class="o">{</span>Name of the key<span class="o">}</span>
</pre></div>


<p>It'll prompt for your passphrase if necessary, then add it to your Keychain[^2]. This only works for this local computer. If you move your private key to another, you need to type the passphrase.</p>
<h2>Config SSH Host</h2>
<p>Next we need to edit the file located at ${HOME}/.ssh/config. If the file is not there, please create it. Add the following lines.</p>
<blockquote>
<div class="highlight"><pre><span></span>Host {You Name It!}
    HostName {The url of the ssh server}
    Port 22{unless the port is changed}
    User {login username}
    IdentityFile <span class="cp">${</span><span class="n">HOME</span><span class="cp">}</span>/.ssh/{Name of the key}
</pre></div>


</blockquote>
<h2>Make Server Knows You</h2>
<p>Here comes the most important part. You need to add the public key to the file on the server by using the following command</p>
<div class="highlight"><pre><span></span>cat <span class="cp">${</span><span class="n">HOME</span><span class="cp">}</span>/.ssh/{Name of the key}.pub | ssh {You Name It!} &#39;cat &gt;&gt; .ssh/authorized_keys&#39;
</pre></div>


<p>It is basically all done. Now, we can try</p>
<div class="highlight"><pre><span></span>$ ssh <span class="o">{</span>You Name It!<span class="o">}</span>
</pre></div>


<p>to connect.</p>
<h2>SSH agent</h2>
<p>You can check if your <code>Private Key</code> is loaded by <code>SSH agent</code>[^3]. Type this in terminal</p>
<div class="highlight"><pre><span></span>$ ssh-add -l
</pre></div>


<p>, and it will you which key is loaded. If the key you need is not shown, you need to add it by</p>
<div class="highlight"><pre><span></span>$ ssh-add /path/to/the/private key/<span class="o">{</span>the private key<span class="o">}</span>
</pre></div>


<p>. Then check again</p>
<div class="highlight"><pre><span></span>$ ssh-add -l
</pre></div>


<p>it should be there.</p>
<h2>Turn off passwd log-in on the server</h2>
<p>For security reason, I choose to turn off the passwd login method on ssh server.
There is downside on this, you always need RSA key to login!!<br />
Open the file '/etc/ssh/sshd_config', and find the following</p>
<div class="highlight"><pre><span></span># Change to yes to enable challenge-response passwords (beware issues with
# some PAM modules and threads)
ChallengeResponseAuthentication no

# Change to no to disable tunnelled clear text passwords
PasswordAuthentication no

# If you just want the PAM account and session checks to run without
# PAM authentication, then enable this but set PasswordAuthentication
# and ChallengeResponseAuthentication to &#39;no&#39;.
UsePAM no
</pre></div>


<h3>Notes</h3>
<p>You can also refer to <a href="http://www-uxsup.csx.cam.ac.uk/~aia21/osx/leopard-ssh.html">this page</a>.<br />
As of Leopard 10.5.1, the ssh agent will be launched during the start-up.</p>
            </div><!-- /.entry-content -->
    <hr />
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style ">
        <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
        <a class="addthis_button_tweet"></a>
        <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
        <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
        <a class="addthis_counter addthis_pill_style"></a>
    </div>
    <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-52a901090a703633"></script>
    <!-- AddThis Button END -->
            <div class="comments">
              <h3>Comments</h3>
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                var disqus_identifier = "blog/2013/10/15/ssh-tricks/";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://mypelicansite.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
              </script>
            </div>

        </div><!-- /.eleven.columns -->
        
<div class="three columns">

<section>
    <h4><i class="icon-home icon-large"></i>Hello</h4>
    <h6>
    <a href="http://www.flickr.com/photos/xavierweathertoplai/9468924220/" title="LCT_3372 by ChenYen.Lai, on Flickr"><img src="http://farm3.staticflickr.com/2824/9468924220_28cf488b58_m.jpg" width="240" height="159" alt="LCT_3372"></a>
    </h6>
    <p>
        We are <a href="http://chengyanlai.github.io/pages/1-chenyen.html">Chen-Yen Lai (賴承彥)</a> and <a href="http://chengyanlai.github.io/pages/1-yaoan.html">Yao-An Chan (詹堯安)</a>.
        We are here to share our life with our friends.
        We are currently living in Merced, CA USA. 
    </p>
</section><!-- <section>
    <h4>
<a href="http://babygraph.com/index_e.php" target="_blank">K Growth Chart</a>
    </h4>
<div style="text-align:center;">
<embed src="http://data.sub.jp/baby/bagra.swf" FlashVars="number=35821" width="480" height="640" 
quality="high" wmode="transparent" name="baby" align="middle" type="application/x-shockwave-flash" />
</div>
</section> -->

<h4><i class="icon-link icon-large"></i>Blog roll</h4>

<ul id="side-list">
      <li><a href="http://hpwange.pixnet.net/blog">老百姓HP的部落格</a></li>
      <li><a href="http://jimmyblanca.blogspot.com">La Casa de JimmyBlanca</a></li>
      <li><a href="http://thousandchen.blogspot.com">A Free Seeker</a></li>
      <li><a href="http://marykey-all.blogspot.com">sally's little world</a></li>
      <li><a href="http://vilina.blogspot.com/">Sentimental Reasons</a></li>
      <li><a href="http://markdown.tw/">Markdown語法</a></li>
      <li><a href="http://daringfireball.net/projects/markdown/dingus">Dingus Tryout</a></li>
      <li><a href="http://michelf.ca/projects/php-markdown/extra/">PHP Markdown Extra</a></li>
  <!--      <li><a href="http://chengyanlai.github.io/pages/7-termianl.html">Terminal</a></li>
      <li><a href="http://chengyanlai.github.io/pages/8-git.html">Git</a></li>
      <li><a href="http://chengyanlai.github.io/pages/9-links.html">Links</a></li>
-->
  </ul>

<h4><i class="icon-folder icon-large"></i>Categories</h4>
<ul id="side-list">
		<li><a href="http://chengyanlai.github.io/category/cooking-backing.html">Cooking-Backing (49)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/food.html">Food (12)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/gimp.html">Gimp (2)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/git.html">Git (4)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/kessler.html">Kessler (6)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/lifetw.html">Life@TW (41)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/lifeus.html">Life@US (25)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/linux.html">Linux (1)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/lo-ma-ji.html">Lo-ma-ji (1)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/misc.html">misc (41)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/movie-drama-book.html">Movie-Drama-Book (9)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/osx.html">OSX (8)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/pregnancy.html">Pregnancy (24)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/python.html">Python (5)
        </a></li>
		<li><a href="http://chengyanlai.github.io/category/travel.html">Travel (52)
        </a></li>
</ul>


<h4><i class="icon-tag icon-large"></i>Tags</h4>
    <ul id="cloud">
    </ul>
<!-- /.Tags -->

<nav class="widget">
  <h4><i class="icon-info icon-large"></i>Social</h4>
  <ul id="side-list">
    <li><a href="http://www.facebook.com/chenyenlai"><i class="icon-facebook icon-large"></i>Chen-Yen's facebook</a></li>
    <li><a href="http://www.flickr.com/photos/xavierweathertoplai/"><i class="icon-flickr icon-large"></i>Chen-Yen's flickr</a></li>
    <li><a href="https://github.com/chengyanlai"><i class="icon-github icon-large"></i>Chen-Yen's github</a></li>
    <li><a href="https://twitter.com/chenyenlai"><i class="icon-twitter icon-large"></i>Chen-Yen's twitter</a></li>
    <li><a href="http://www.linkedin.com/pub/chenyen-lai/52/568/901"><i class="icon-linkedin icon-large"></i>Chen-Yen's linkedin</a></li>
    <li><a href="https://plus.google.com/+ChenYenLai"><i class="icon-gplus icon-large"></i>Chen-Yen's gplus</a></li>
    <li><a href="mailto:chengyanlai@gmail.com"><i class="icon-email icon-large"></i>Chen-Yen's email</a></li>
    <li><a href="http://www.facebook.com/yaoanchan"><i class="icon-facebook icon-large"></i>Yao-An's facebook</a></li>
  </ul>
</nav>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">


        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License
                    <i class="icon-cc-nc icon-large"></i></a>
                    <br />
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a> -
                    Domain name provided by <a href="http://my.dot.tk/cgi-bin/amb/landing.dottk?nr=747808::13091085::1" target="_new">Dot.TK</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">

                <li><div class="btn primary"><a href="https://github.com/chengyanlai" target="_blank">Github</a></div></li>

                <li><div class="btn twitter"><a href="https://twitter.com/chenyenlai" target="_blank">Twitter</a></div></li>

                <li><div class="btn facebook"><a href="https://www.facebook.com/chenyenlai" target="_blank">Facebook</a></div></li>

                <li><div class="btn danger"><a href="https://plus.google.com/+ChenYenLai" target="_blank">Google+</a></div></li>

              </ul>
            </div>
          </div>
        </footer>

    </div>


<script type="text/javascript">
    var disqus_shortname = 'mypelicansite';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
  <script src="http://chengyanlai.github.io/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="http://chengyanlai.github.io/theme/js/libs/gumby.min.js"></script>
  <script src="http://chengyanlai.github.io/theme/js/plugins.js"></script>

</body>
</html>